---
name:  Display Data
menu: Data
---

import { Playground, Link } from 'docz';
import PropsTable from '../utils/DynamicPropsTable';

# Display data

How to use numbani-react to display data (stored in your backend) to users ?

## Prerequisite

- <Link to="docs-data-index#entity">You need an entity repository (EntityRepo) object.</Link>

## Create EntityView

An EntityView is an object that contains react components you can use to display data related to an entity.

For example, using Firestore as persistence provider and Bootstrap 4 as UI provider :

```javascript
import EntityManagerBuilder from "numbani-react/lib/model/EntityManagerBuilder";
import FirestorePersistence from "numbani-react/lib/model/persistence/provider/Firestore";

import EntitySchemaBuilder from "numbani-react/lib/model/schema/EntitySchemaBuilder";
import types from "numbani-react/lib/model/schema/types";

import firebase from "firebase/app";
import "firebase/firestore"; // Required for side effect

import bootstrap4UiLib from "numbani-react/lib/ui/lib/bootstrap4";
import "bootstrap/dist/css/bootstrap.min.css"; // So we could have bootstrap theme, you can replace this by a custom build.

import UI from "numbani-react/lib/ui";

const config = {
  /* PUT YOUR FIREBASE CONFIG HERE */
};

firebase.initializeApp(config);

const db = firebase.firestore();

const entityManager = new EntityManagerBuilder()
  .withPersistenceProvider(new FirestorePersistence(db))
  .build();

const heroSchema = new EntitySchemaBuilder()
  .addAttribute("alias",types.String.required().min(1).max(255))
  .addAttribute("powers", types.Array.of(types.String).required())
  .addAttribute("colors", types.Array.of(types.String).required())
  .build();

const heroesRepo = entityManager.register("heroes", { schema: heroSchema }); // <<<<< Here we have our EntityRepo

const HeroView = UI(bootstrap4UiLib).forRepo(heroesRepo); //<<<<< And then we build the EntityView
```

import {HeroView, db, load} from './displayEntitySetup';

## Use your EntityView

### Simple data loading

#### Load one value from the backend

To load one value from the backend and display it in React, you can use the **EntityView.read** component.
For that you need to pass the component a prop named **entityRef**.

The **entityRef** is specific to your persistence provider and is a reference object to the data to display. (See below an example for Firestore).

The component then take as child a function which parameter is the value returned by the backend and which return the component you want to display.

<Playground>
<HeroView.read entityRef={db.collection("heroes").doc("flash")}>
{
flash =>
<pre>
{JSON.stringify(flash, null, 2)}
</pre>
}
</HeroView.read>
</Playground>

By default :

- A loading animation is provided. You can change it by passing a react element in props as **renderLoading**. <Link to="docs-data-example-custom-loader">Example</Link>

- Errors string returned by your persistence provider are displayed. You can configure **bootstrap4UiLib** to translate them.
Or you can replace it by passing a function as **renderError** props to the component.
This function should take as input the error returned by the persistence provider and return a react element to display.


<Playground>
<HeroView.read entityRef={db.collection("heroes").doc("dontExist")}>
{
flash =>
<pre>
{JSON.stringify(flash, null, 2)}
</pre>
}
</HeroView.read>
</Playground>

<br/>
<br/>

#### Props table of EntityView.Read

<PropsTable of={HeroView.read} comments={{
  entityRef : "Specific to your persistence provider and is a reference object to the data to display",
  children : "Render method, take as input the value returned by your backend",
  renderError : "Render method, take as input the error returned by your backend",
  renderLoading : "React node, will be displayed during loading"
}}/>

<br/>
<br/>

#### Load a list of values from backend

Same as one value, only difference is that your persistence provider return an array.

<Playground>
<HeroView.read entityRef={db.collection("heroes")}>
{
heroes =>
<pre>
{JSON.stringify(heroes, null, 2)}
</pre>
}
</HeroView.read>
</Playground>