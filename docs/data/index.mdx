---
name:  Concepts
menu: Data
order : 1
---

import { Link } from 'docz';

# Concepts

Numbani-react take the assumption that data related actions (display, edit, delete), could be reduced to **CRUD** (**C**reate, **R**ead, **U**pdate and **D**elete) operations on **entities** (also called models).

Examples of entities are *Car*, *Invoice* and *Customer*. And the value `{ brand : "Toyota" , color : "red" }` is an example *Car* instance. (More on this later).

Thus, to make it easier to manage data in your web app, we provide you the **EntityManager** abstraction.

## EntityManager

An entity manager is the context in which your entities are created, read, updated and saved. To build one you need a **PersistenceProvider**.

### PersistenceProvider

The persistence provider is the underlying back end that allow you to persist your data (entities).

Numbani-react ships :

- <Link to="/docs-model-provider-firestore">Firestore Persitence Provider</Link>

- <Link to="/docs-model-provider-localstorage">LocalStorage Persitence Provider</Link> (TODO)

- <Link to="/docs-model-provider-transient">Transient Persitence Provider</Link> (TODO)

### EntityManagerBuilder

Here is a code snippet to build an entityManager using Firebase as persistence provider.

```javascript

import EntityManagerBuilder from 'numbani-react/lib/model/EntityManagerBuilder';
import FirestorePersistence from 'numbani-react/lib/model/persistence/provider/Firestore';

import firebase from 'firebase/app';
import 'firebase/firestore'; // Required for side effect

const config = {
    /* PUT YOUR FIREBASE CONFIG HERE */
};

firebase.initializeApp(config);

const db = firebase.firestore();

const entityManager = new EntityManagerBuilder()
  .withPersistenceProvider(new FirestorePersistence(db)) // Read about configuring FirestorePersistence before using it
  .build();

```

## Entity

Once you have an entity manager, next step is to add some entities... and well manage them ðŸ˜„.

To create an entity, you have to define its schema.

### EntitySchema

An entity schema define what type of values the entity could take.

You build a schema by defining **attributes** of a certain **type** (with validation), adding **cross-attributes validation** rules (TODO) and **behaviors** (TODO).

#### Defining attributes

```javascript

import EntitySchemaBuilder from 'numbani-react/lib/model/schema/EntitySchemaBuilder';
import types from 'numbani-react/lib/model/schema/types';

const carSchema = new EntitySchemaBuilder()
  .addAttribute("brand", types.String.required().min(1).max(255))
  .addAttribute("color", types.Enum.required().oneOf("red", "blue","green","black"))
  .build();

```

You can have more information on the various type available here. (TODO)

*The power of numbani-react comes from the high number of types available (each with validation method and ui component)*

### EntityRepo

You can now register your entity schema in the entity manager. This operation returns an **EntityRepo** object.

You can use the entity repository object to read, save or delete entity value directly.

```javascript

const carsRepo = entityManager.buildEntity("cars", { schema: carSchema });

carsRepo.save({ brand : "Toyota" , color : "red" }).then( ref => console.log(`New car saved at ref : ${ref}`));

```

More information on **EntityRepo** and *ref* here. (TODO)

## User centric components

Numbani-react provides multiples React components able to interact with entity repository based on **what the user want to do**.